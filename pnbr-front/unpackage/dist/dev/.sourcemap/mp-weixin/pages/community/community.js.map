{"version":3,"sources":["uni-app:///main.js","webpack:///D:/pnbr-system/pnbr-front/pages/community/community.vue?71cf","webpack:///D:/pnbr-system/pnbr-front/pages/community/community.vue?e55e","webpack:///D:/pnbr-system/pnbr-front/pages/community/community.vue?815c","webpack:///D:/pnbr-system/pnbr-front/pages/community/community.vue?064c","uni-app:///pages/community/community.vue","webpack:///D:/pnbr-system/pnbr-front/pages/community/community.vue?7624","webpack:///D:/pnbr-system/pnbr-front/pages/community/community.vue?94bd","webpack:///D:/pnbr-system/pnbr-front/wxs/number.wxs?4d19","webpack:///D:/pnbr-system/pnbr-front/wxs/number.wxs?bed1"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"pages/community/community.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/community/community.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./community.vue?vue&type=template&id=2c27ccda&filter-modules=eyJ3eHMiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6NTQxNSwiYXR0cnMiOnsibW9kdWxlIjoid3hzIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4uLy4uL3d4cy9udW1iZXIud3hzIn0sImVuZCI6NTQxNX19&\"\nvar renderjs\nimport script from \"./community.vue?vue&type=script&lang=js&\"\nexport * from \"./community.vue?vue&type=script&lang=js&\"\nimport style0 from \"./community.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* custom blocks */\nimport block0 from \"../../wxs/number.wxs?vue&type=custom&index=0&blockType=script&issuerPath=D%3A%5Cpnbr-system%5Cpnbr-front%5Cpages%5Ccommunity%5Ccommunity.vue&module=wxs&lang=wxs\"\nif (typeof block0 === 'function') block0(component)\n\ncomponent.options.__file = \"pages/community/community.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./community.vue?vue&type=template&id=2c27ccda&filter-modules=eyJ3eHMiOnsidHlwZSI6InNjcmlwdCIsImNvbnRlbnQiOiIiLCJzdGFydCI6NTQxNSwiYXR0cnMiOnsibW9kdWxlIjoid3hzIiwibGFuZyI6Ind4cyIsInNyYyI6Ii4uLy4uL3d4cy9udW1iZXIud3hzIn0sImVuZCI6NTQxNX19&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./community.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./community.vue?vue&type=script&lang=js&\"","<template>\r\n<!-- 帖子详情 -->\r\n<view class=\"container\">\r\n  <view class=\"input-box\">\r\n\t  <view class=\"section\">\r\n\t    <image style=\"width: 130rpx;height: 130rpx;\" :src=\"user.avatarImage?serverUrl+user.avatarImage:'../../static/images/icon/head.png'\"></image>\r\n\t\t<text style=\"margin-left: 10rpx;\">{{user.username}}</text>\r\n\t  </view>\r\n  </view>\r\n  <!-- 轮播图 -->\r\n  <swiper :indicator-dots=\"indicatorDots\" :autoplay=\"autoplay\" :indicator-color=\"indicatorColor\" :interval=\"interval\" :duration=\"duration\" :indicator-active-color=\"indicatorActiveColor\">\r\n    <block v-for=\"(item, index) in imgs\" :key=\"index\">\r\n      <swiper-item>\r\n        <image :src=\"serverUrl+item\"></image>\r\n      </swiper-item>\r\n    </block>\r\n  </swiper>\r\n  <!-- end  轮播图 -->\r\n  <!-- 帖子信息 -->\r\n  <!-- <block wx:for=\"{{imgs}}\" wx:key=''> -->\r\n  <view class=\"prod-info\">\r\n    <view class=\"tit-wrap\">\r\n      <view class=\"prod-tit\">{{prodName}}</view>\r\n    </view>\r\n    <view class=\"sales-p\">欢迎加入本讨论</view>\r\n  </view>\r\n  <!-- end 帖子详情 -->\r\n  <!-- 留言 -->\r\n  <view class=\"cmt-wrap\">\r\n    <view class=\"cmt-tit\" @tap=\"showComment\">\r\n      <view class=\"cmt-t\">\r\n        留言\r\n      </view>\r\n      <view class=\"cmt-count\">\r\n        共{{LeaveNumber}}条\r\n        <text class=\"cmt-more\"></text>\r\n      </view>\r\n    </view>\r\n    <view class=\"cmt-cont\">\r\n      <view class=\"cmt-items\">\r\n        <view v-for=\"(item, index) in littleCommPage\" :key=\"index\" class=\"cmt-item\">\r\n          <view class=\"cmt-user\">\r\n            <text class=\"date\">{{item.createdTime}}</text>\r\n            <view class=\"cmt-user-info\">\r\n              <image class=\"user-img\" :src=\"item.commentatorAvatarImage?serverUrl+item.commentatorAvatarImage:'../../static/images/icon/head.png'\"></image>\r\n              <view class=\"nickname\">{{item.commentator}}</view>\r\n              <!-- <van-rate readonly :value=\"item.score\" @change=\"onChange\" color=\"#f44\"></van-rate> -->\r\n            </view>\r\n          </view>\r\n          <view class=\"cmt-cnt\" @tap=\"openLeaveMessage\" :data-id=\"item.id\" :data-commentator=\"item.commentator\" :data-toUserType=\"item.creatorType\" :data-toUserId=\"item.creatorId\">{{item.content}}</view>\r\n<!--          <scroll-view class=\"cmt-attr\" scroll-x=\"true\" v-if=\"item.pics.length\">\r\n            <image v-for=\"(commPic, index2) in item.pics\" :key=\"index2\" :src=\"commPic\"></image>\r\n          </scroll-view> -->\r\n        </view>\r\n      </view>\r\n      <view class=\"cmt-more-v\" v-if=\"LeaveNumber > 2\">\r\n      </view>\r\n\t  <view class=\"cmt-more-v\">\r\n\t    <text @tap=\"openLeaveMessage\" data-toUserName=\"\" data-index=\"-1\" data-id=\"0\" data-toUserType=\"0\" data-toUserId=\"0\">留言</text>\r\n\t  </view>\r\n    </view>\r\n  </view>\r\n\r\n  <!-- 留言弹窗 -->\r\n  <view class=\"cmt-popup\" v-if=\"commentShow\">\r\n    <view class=\"cmt-tit\">\r\n      <view class=\"cmt-t\">\r\n        留言\r\n      </view>\r\n\t  <view class=\"cmt-count\" style=\"margin-right: 100rpx;\">\r\n\t    共{{LeaveNumber}}条\r\n\t  </view>\r\n      <text class=\"close\" @tap=\"closePopup\"></text>\r\n    </view>\r\n    <view class=\"cmt-cont\">\r\n      <view class=\"cmt-items\">\r\n        <view v-for=\"(item, index) in prodCommPage.records\" :key=\"index\" class=\"cmt-item\">\r\n          <view class=\"cmt-user\">\r\n            <text class=\"date\">{{item.createdTime}}</text>\r\n            <view class=\"cmt-user-info\">\r\n              <image class=\"user-img\" :src=\"item.commentatorAvatarImage?serverUrl+item.commentatorAvatarImage:'../../static/images/icon/head.png'\"></image>\r\n              <view class=\"nickname\">{{item.commentator}}</view>\r\n              <!-- <van-rate readonly :value=\"item.score\" @change=\"onChange\" color=\"#f44\"></van-rate> -->\r\n            </view>\r\n          </view>\r\n          <view class=\"cmt-cnt\" @tap=\"openLeaveMessage\" :data-toUserName=\"item.commentator\" :data-index=\"index\" :data-id=\"item.id\" :data-commentator=\"item.commentator\" :data-toUserType=\"item.creatorType\" :data-toUserId=\"item.creatorId\">{{item.content}}</view>\r\n\r\n\t\t  <view v-for=\"(subItem, subIndex) in item.subEvaluationRowVos.list\" :key=\"subIndex\" class=\"cmt-reply\">\r\n\t\t    \r\n\t\t\t<view class=\"cmt-user\" style=\"padding-left: 50rpx;\">\r\n\t\t\t  <text class=\"date\">{{subItem.createdTime}}</text>\r\n\t\t\t  <view class=\"cmt-user-info\">\r\n\t\t\t    <image class=\"user-img\" :src=\"subItem.commentatorAvatarImage?serverUrl+subItem.commentatorAvatarImage:'../../static/images/icon/head.png'\"></image>\r\n\t\t\t    <view class=\"nickname\">{{subItem.commentator}}</view>\r\n\t\t\t    \r\n\t\t\t  </view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cmt-cnt\" @tap=\"openLeaveMessage\" :data-toUserName=\"subItem.commentator\" :data-index=\"index\" style=\"padding-left: 50rpx;\" :data-id=\"item.id\" :data-commentator=\"subItem.commentator\" :data-toUserType=\"subItem.creatorType\" :data-toUserId=\"subItem.creatorId\">回复{{item.commentator}}: {{subItem.content}}</view>\r\n\t\t  </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n  <!-- 评价输入框-->\r\n  <view class=\"cmt-input-popup\" v-if=\"showLeave\">\r\n\t  <view class=\"cmt-input-tit\">\r\n\t    <text class=\"close\" @tap=\"closeInputPopup\"></text>\r\n\t  </view>\r\n\t  <view>\r\n\t\t<textarea style=\"height: 260rpx;width: 100%;padding-top: 30rpx;\" :placeholder=\"leavePla\" type=\"text\" maxlength=\"600\" :value=\"evaluation.content\" @input=\"onLeaveMessageInput\"></textarea>\r\n\t\t<!-- 功能按钮 -->\r\n\t\t<view class=\"btn-box\">\r\n\t\t  <view class=\"keep btn\" @tap=\"onSendLeave\">\r\n\t\t    <text>发送</text>\r\n\t\t  </view>\r\n\t\t</view>\r\n\t\t<!-- end 功能按钮 -->\r\n\t  </view>\r\n  </view>\r\n</view>\r\n</template>\r\n\r\n<script module=\"wxs\" lang=\"wxs\" src=\"../../wxs/number.wxs\"></script>\r\n\r\n<script>\r\n// pages/prod/prod.js\r\nconst app = getApp();\r\nvar http = require(\"../../utils/http.js\");\r\nvar config = require(\"../../utils/config.js\");\r\nvar util = require(\"../../utils/util.js\");\r\n// import vanRate from \"../../vant/rate/index\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      // picDomain: config.picDomain,\r\n      indicatorDots: true,\r\n      indicatorColor: '#f2f2f2',\r\n      indicatorActiveColor: '#eb2444',\r\n      autoplay: true,\r\n      interval: 3000,\r\n      duration: 1000,\r\n      prodNum: 0,\r\n      totalCartNum: 0,\r\n      pic: \"\",\r\n      imgs: '',\r\n      prodName: '',\r\n      brief: '',\r\n      prodId: 0,\r\n      skuId: 0,\r\n\t  content: '',\r\n      popupShow: false,\r\n      // 是否获取过用户领取过的优惠券id\r\n      loadCouponIds: false,\r\n      skuShow: false,\r\n      commentShow: false,\r\n      skuGroup: {},\r\n      defaultSku: undefined,\r\n      selectedProp: [],\r\n      selectedPropObj: {},\r\n      propKeys: [],\r\n      allProperties: [],\r\n      prodCommData: {\r\n\t\t  number: 0\r\n\t  },\r\n      prodCommPage: {\r\n        current: 0,\r\n        pages: 0,\r\n        records: []\r\n      },\r\n      littleCommPage: [],\r\n      isCollection: false,\r\n\t  serverUrl: config.domain,\r\n\t  user: {},\r\n\t  sellerId: 0,\r\n\t  sellerType: 0, //卖家类型，0客户，1系统代理人\r\n\t  backgroundAgentId: 0,\r\n\t  showLeave: false,\r\n\t  evaluation: {},\r\n\t  LeaveNumber: 0,\r\n\t  leavePla: '快来评论吧',\r\n\t  leaveIndex: -1,\r\n\t  loginResult: {},\r\n\t  toUserName: ''\r\n    };\r\n  },\r\n\r\n  components: {\r\n    \r\n  },\r\n  props: {},\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    this.setData({\r\n\t  loginResult: uni.getStorageSync(\"loginResult\"),\r\n      prodId: options.prodid\r\n    }); \r\n\t// 加载帖子信息\r\n\r\n    this.getProdInfo(); \r\n\tthis.getCartInfo();\r\n\t// 加载评论数据\r\n\r\n    this.getProdCommData(); // 加载评论项\r\n\tthis.getLittleProdComm();\r\n\r\n    this.getCollection();\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {},\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n    this.setData({\r\n      totalCartNum: app.globalData.totalCartCount\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {},\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {},\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {},\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {},\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {},\r\n\r\n  /**\r\n   * 分享设置\r\n   */\r\n  onShareAppMessage: function (res) {\r\n    return {\r\n      title: this.prodName,\r\n      path: '/pages/community/community?prodid=' + this.prodid\r\n    };\r\n  },\r\n  methods: {\r\n\t\r\n\tdownload: function() {\r\n\t\tuni.downloadFile({\r\n\t\t\tsuccess: (chooseImageRes) => {\r\n\t\t\t\tconst tempFilePaths = chooseImageRes.tempFilePaths;\r\n\t\t\t\tconst downloadTask = uni.downloadFile({\r\n\t\t\t\t\turl: config.domain+\"/common/download\", //仅为示例，非真实的接口地址\r\n\t\t\t\t\tfilePath: tempFilePaths[0],\r\n\t\t\t\t\tname: 'file',\r\n\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (downloadFileRes) => {\r\n\t\t\t\t\t\tvar data = JSON.parse(downloadFileRes.data);\r\n\t\t\t\t\t\tconsole.log(data.fileName);\r\n\t\t\t\t\t\tvar images = this.images;\r\n\t\t\t\t\t\timages.push(data.fileName);\r\n\t\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\t  images: images\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\r\n\t\t\t\tdownloadTask.onProgressUpdate((res) => {\r\n\t\t\t\t\tconsole.log('下载进度' + res.progress);\r\n\t\t\t\t\tconsole.log('已经下载的数据长度' + res.totalBytesSent);\r\n\t\t\t\t\tconsole.log('预期需要下载的数据总长度' + res.totalBytesExpectedToSend);\r\n\t\t\r\n\t\t\t\t\t// 测试条件，取消下载任务。\r\n\t\t\t\t\t// if (res.progress > 50) {\r\n\t\t\t\t\t//     downloadTask.abort();\r\n\t\t\t\t\t// }\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t\r\n    // 获取帖子信息\r\n    getProdInfo() {\r\n      uni.showLoading();\r\n      var params = {\r\n        url: `/community/prodInfo/${this.prodId}`,\r\n        method: \"GET\",\r\n        callBack: res => {\r\n          var imgStrs = res.imagesList;\r\n\t\t  var imgs;\r\n\t\t  if(imgStrs!=null) {\r\n\t\t\t  var array = imgStrs.split(\",\");\r\n\t\t\t  imgs = this.trimSpace(array);\r\n\t\t  }\r\n          //var content = util.formatHtml(res.content);\r\n\t\t  var sellerType = 0;\r\n\t\t  var sellerId=res.createId\r\n\t\t  var toUserId = sellerId;\r\n\t\t  if(res.backgroundAgentId>0) {\r\n\t\t\t  sellerType=1;\r\n\t\t\t  sellerId=res.backgroundAgentId\r\n\t\t\t  toUserId='admin'+res.backgroundAgentId\r\n\t\t  }\r\n          this.setData({\r\n            imgs: imgs,\r\n            brief: res.brief,\r\n            prodName: res.title,\r\n            prodId: res.id,\r\n            pic: res.images,\r\n\t\t\tcontent: res.content,\r\n\t\t\tbackgroundAgentId: res.backgroundAgentId,\r\n\t\t\tsellerId: sellerId,\r\n\t\t\tsellerType: sellerType\r\n          }); \r\n\t\t  var url = `/user/${sellerId}`\r\n\t\t  if(sellerType==1) {\r\n\t\t\t  url = `/background/user/${sellerId}`\r\n\t\t  }\r\n\t\t  var params = {\r\n\t\t    url: url,\r\n\t\t    method: \"GET\",\r\n\t\t    callBack: res2 => {\r\n\t\t\t  var user = {\r\n\t\t\t\t  id: toUserId,\r\n\t\t\t\t  username: res2.data.username\r\n\t\t\t  }\r\n\t\t      this.setData({\r\n\t\t          user: user\r\n\t\t      }); \r\n\t\t  \t\t  \r\n\t\t      uni.hideLoading();\r\n\t\t    }\r\n\t\t  };\r\n\t\t  http.request(params);\r\n          uni.hideLoading();\r\n        }\r\n      };\r\n      http.request(params);\r\n    },\r\n\ttrimSpace(array) {  \r\n\t     for(var i = 0 ;i<array.length;i++)  \r\n\t     {  \r\n\t         if(array[i] == \"\" || array[i] == null || typeof(array[i]) == \"undefined\")  \r\n\t         {  \r\n\t                  array.splice(i,1);  \r\n\t                  i= i-1;  \r\n\t         }  \r\n\t     }  \r\n\t     return array;  \r\n\t},\r\n    getCartInfo() {\r\n\t\tuni.showLoading();\r\n\t\tvar params = {\r\n\t\t  url: `/cart/bySkuId/${this.prodId}`,\r\n\t\t  method: \"GET\",\r\n\t\t  callBack: res => {\r\n\t\t\t  if(res) {\r\n\t\t\t\t  this.setData({\r\n\t\t\t\t    prodNum: res.num,\r\n\t\t\t\t  }); \r\n\t\t\t  }\r\n\t\t    uni.hideLoading();\r\n\t\t  }\r\n\t\t};\r\n\t\thttp.request(params);\r\n\t},\r\n    getProdCommData() {\r\n      http.request({\r\n        url: `/comevaluation/count/${this.prodId}`,\r\n        method: \"GET\",\r\n        data: {\r\n        },\r\n        callBack: res => {\r\n          this.setData({\r\n            LeaveNumber: res\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    // 获取部分评论\r\n    getLittleProdComm() {\r\n      var query = {\r\n      \tpageNum: 1,\r\n      \tpageSize: 100,\r\n      \tpetId: this.prodId\r\n      }\r\n      this.getProdCommPage(query);\r\n    },\r\n\t\r\n\tgetSubMoreCommPage(e) {\r\n\t\tvar index = e.currentTarget.dataset.index;\r\n\t\tvar parentId = e.currentTarget.dataset.parentId;\r\n\t\tvar pageNum = e.currentTarget.dataset.pageNum+1;\r\n\t\tconsole.log(pageNum)\r\n\t\tvar query = {\r\n\t\t\tpageNum: pageNum,\r\n\t\t\tpageSize: 100,\r\n\t\t\tpetId: this.prodId,\r\n\t\t\tparentId: parentId\r\n\t\t}\r\n\t\thttp.request({\r\n\t\t  url: \"/comevaluation/sub/list\",\r\n\t\t  method: \"POST\",\r\n\t\t  data: query,\r\n\t\t  callBack: res => {\r\n\t\t\t  console.log(res);\r\n\t\t    let records = this.prodCommPage.records;\r\n\t\t\tlet subEvaluationRowVos =  records[index].subEvaluationRowVos;\r\n\t\t\tlet subList = subEvaluationRowVos.list\r\n\t\t\tsubList = subList.concat(res.list);\r\n\t\t\tsubEvaluationRowVos.list = subList;\r\n\t\t\tsubEvaluationRowVos.pages = res.pages;\r\n\t\t\tsubEvaluationRowVos.pageNum = res.pageNum;\r\n\t\t\trecords[index].subEvaluationRowVos = subEvaluationRowVos;\r\n\t\t\tconsole.log(records[index]);\r\n\t\t    this.setData({\r\n\t\t      prodCommPage: {\r\n\t\t        records: records\r\n\t\t      }\r\n\t\t    }); // 如果帖子详情中没有评论的数据，截取两条到帖子详情页帖子详情\r\n\t\t\r\n\t\t    if (!this.littleCommPage.length) {\r\n\t\t      this.setData({\r\n\t\t        littleCommPage: records.slice(0, 2)\r\n\t\t      });\r\n\t\t    }\r\n\t\t  }\r\n\t\t});\r\n\t},\r\n\r\n    // 获取分页获取一级评论\r\n    getProdCommPage(query) {\r\n      http.request({\r\n        url: \"/comevaluation/list\",\r\n        method: \"POST\",\r\n        data: query,\r\n        callBack: res => {\r\n          let records = this.prodCommPage.records;\r\n          records = records.concat(res.list);\r\n          this.setData({\r\n            prodCommPage: {\r\n              current: res.pageNum,\r\n              pages: res.pages,\r\n              records: records\r\n            }\r\n          }); // 如果帖子详情中没有评论的数据，截取两条到帖子详情页帖子详情\r\n\r\n          if (!this.littleCommPage.length) {\r\n            this.setData({\r\n              littleCommPage: records.slice(0, 2)\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n\r\n\r\n    showComment: function () {\r\n      this.setData({\r\n        commentShow: true\r\n      });\r\n    },\r\n    closePopup: function () {\r\n      this.setData({\r\n        popupShow: false,\r\n        skuShow: false,\r\n        commentShow: false\r\n      });\r\n    },\r\n\tcloseInputPopup: function () {\r\n      this.setData({\r\n        showLeave: false,\r\n      });\r\n    },\r\n\topenLeaveMessage: function (e) {\r\n\t\tthis.setData({\r\n\t\t  evaluation: {}\r\n\t\t});\r\n\t\tlet id = e.currentTarget.dataset.id;\r\n\t\tlet toUserType = e.currentTarget.dataset.toUserType;\r\n\t\tlet toUserId = e.currentTarget.dataset.toUserId;\r\n\t\tlet commentator = e.currentTarget.dataset.commentator;\r\n\t\tlet index = e.currentTarget.dataset.index;\r\n\t\tlet leavePla = commentator?'回复 '+commentator:'快来评论吧';\r\n\t\tlet toUserName = e.currentTarget.dataset.toUserName;\r\n\t\tthis.setData({\r\n\t\t  'evaluation.parentId': id,\r\n\t\t  'evaluation.petId': this.prodId,\r\n\t\t  'evaluation.toUserType': toUserType,\r\n\t\t  'evaluation.toUserId': toUserId,\r\n\t\t  leavePla: leavePla,\r\n\t\t  leaveIndex: index,\r\n\t\t  toUserName: toUserName\r\n\t\t});\r\n\t\tthis.showLeave=true;\r\n\t},\r\n\tonLeaveMessageInput: function(e) {\r\n\t\tthis.setData({\r\n\t\t  'evaluation.content': e.detail.value\r\n\t\t});\r\n\t},\r\n\tonSendLeave: function(e) {\r\n\t\tconsole.log(this.evaluation)\r\n\t\tvar evaluation = this.evaluation;\r\n\t\tvar params = {\r\n\t\t  url: \"/comevaluation\",\r\n\t\t  method: \"POST\",\r\n\t\t  needToken: true,\r\n\t\t  data: evaluation,\r\n\t\t  callBack: res => {\r\n\t\t    uni.hideLoading();\r\n\t\t    uni.showToast({\r\n\t\t      title: \"发送成功\",\r\n\t\t      icon: \"none\"\r\n\t\t    });\r\n\t\t\tlet index = this.leaveIndex;\r\n\t\t\tlet records = this.prodCommPage.records;\r\n\t\t\tlet user = this.loginResult.data;\r\n\t\t\tconsole.log(user);\r\n\t\t\tlet avatarImage = user.avatarImage;\r\n\t\t\tlet username = user.username;\r\n\t\t\tlet toUserName = this.toUserName;\r\n\t\t\tvar evaluationRowVo = evaluation;\r\n\t\t\tevaluationRowVo.commentator = username;\r\n\t\t\tevaluationRowVo.commentatorAvatarImage = avatarImage;\r\n\t\t\tevaluationRowVo.toUserName = toUserName;\r\n\t\t\tvar evaluationRowVos = [];\r\n\t\t\tevaluationRowVos[0] = evaluationRowVo;\r\n\t\t\tif(index==-1) {\r\n\t\t\t\trecords = records.concat(evaluationRowVos);\r\n\t\t\t}else{\r\n\t\t\t\tlet subEvaluationRowVos =  records[index].subEvaluationRowVos;\r\n\t\t\t\tlet subList = subEvaluationRowVos.list\r\n\t\t\t\tsubList = subList.concat(evaluationRowVos);\r\n\t\t\t\tsubEvaluationRowVos.list = subList;\r\n\t\t\t\trecords[index].subEvaluationRowVos = subEvaluationRowVos;\r\n\t\t\t}\r\n\t\t\tthis.setData({\r\n\t\t\t  showLeave: false,\r\n\t\t\t  prodCommPage: {\r\n\t\t\t    records: records\r\n\t\t\t  }\r\n\t\t\t});\r\n\t\t  }\r\n\t\t};\r\n\t\thttp.request(params);\r\n\t}\r\n  }\r\n};\r\n</script>\r\n<style>\r\n@import \"./community.css\";\r\n</style>","import mod from \"-!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./community.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./community.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1651916085592\n      var cssReload = require(\"D:/HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./number.wxs?vue&type=custom&index=0&blockType=script&issuerPath=D%3A%5Cpnbr-system%5Cpnbr-front%5Cpages%5Ccommunity%5Ccommunity.vue&module=wxs&lang=wxs\"; export default mod; export * from \"-!../../../HBuilderX.3.3.5.20211229.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-filter-loader/index.js!./number.wxs?vue&type=custom&index=0&blockType=script&issuerPath=D%3A%5Cpnbr-system%5Cpnbr-front%5Cpages%5Ccommunity%5Ccommunity.vue&module=wxs&lang=wxs\"","export default function (Component) {\n       if(!Component.options.wxsCallMethods){\n         Component.options.wxsCallMethods = []\n       }\n       \n     }"],"sourceRoot":""}